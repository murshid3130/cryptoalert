<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mehrab AI - Learn & Trade Terminal</title>
    <style>
        :root { --bg: #0b0e11; --card: #1e2329; --gold: #f0b90b; --green: #02c076; --red: #cf304a; --text: #eaecef; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 10px; font-size: 12px; overflow-x: hidden; }
        
        .main-layout { display: grid; grid-template-columns: 1fr 380px; gap: 10px; height: 95vh; }
        .left-panel { display: flex; flex-direction: column; gap: 10px; }
        
        /* Analysis & Outlook Section */
        .outlook-box { background: #1c2127; border: 1px solid #444; border-top: 3px solid var(--gold); padding: 12px; border-radius: 6px; }
        .section-title { color: var(--gold); font-weight: bold; font-size: 0.9rem; margin-bottom: 8px; display: flex; justify-content: space-between; }
        
        /* Compact Chart */
        #chart-container { height: 320px; border-radius: 8px; border: 1px solid #333; overflow: hidden; background: #000; }
        
        /* Live Stats Row */
        .stats-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
        .stat-card { background: var(--card); padding: 10px; border-radius: 6px; text-align: center; border: 1px solid #333; }
        .stat-val { display: block; font-size: 1.1rem; font-weight: bold; color: var(--gold); }

        /* Alert Overlay */
        #alert-overlay { display: none; position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: var(--gold); color: black; padding: 15px 30px; border-radius: 50px; font-weight: bold; z-index: 1000; box-shadow: 0 0 20px rgba(240,185,11,0.5); animation: slideDown 0.5s ease; }
        @keyframes slideDown { from { top: -50px; } to { top: 20px; } }

        .log-panel { background: #161a1e; border-radius: 8px; border: 1px solid #444; padding: 10px; flex-grow: 1; overflow-y: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 0.75rem; }
        td, th { padding: 6px; text-align: left; border-bottom: 1px solid #222; }
        .bullish { color: var(--green); } .bearish { color: var(--red); }
    </style>
</head>
<body>

    <div id="alert-overlay">ðŸš¨ ALERT: ETH REACHED ENTRY ZONE ($1,960)!</div>

    <div class="main-layout">
        <div class="left-panel">
            <div class="stats-row">
                <div class="stat-card"><span>Current ETH</span><span id="price-live" class="stat-val">--</span></div>
                <div class="stat-card"><span>Support</span><span class="stat-val" style="color:var(--green)">$1,950</span></div>
                <div class="stat-card"><span>Resistance</span><span class="stat-val" style="color:var(--red)">$2,040</span></div>
                <div class="stat-card"><span>Next Move</span><span id="move-ai" class="stat-val" style="font-size:0.8rem">WAITING</span></div>
            </div>

            <div id="chart-container">
                <div id="tv_chart"></div>
            </div>

            <div class="outlook-box">
                <div class="section-title">ðŸ“Š MARKET HAAL-EHWAAL (Feb 22, 2026)</div>
                <div id="market-text" style="line-height:1.5; color:#ccc;">
                    Analyzing market structure... ETH is showing a <strong>Descending Triangle</strong> near $1,970. RSI is at 38, indicating a potential bounce if $1,950 support holds.
                </div>
            </div>
        </div>

        <div style="display:flex; flex-direction:column; gap:10px;">
            <div class="outlook-box" style="border-top-color: var(--green);">
                <div class="section-title">ðŸš€ MEHRAB AI TRADE SUGGESTION</div>
                <div style="background: rgba(2, 192, 118, 0.1); padding: 10px; border-radius: 4px;">
                    <strong>Entry:</strong> $1,960 - $1,965<br>
                    <strong>Target:</strong> $2,040 (Resistance)<br>
                    <strong>Stop Loss:</strong> $1,940<br>
                    <p style="font-size:0.7rem; margin-top:5px; color:#848e9c;">*Learning Tip: Support par buying tab karein jab candle wahan se bounce kare.*</p>
                </div>
            </div>

            <div class="log-panel">
                <div class="section-title">ðŸ“œ TRADE & ALERT LOGS</div>
                <table id="logs">
                    <thead><tr><th>Time</th><th>Event</th><th>Price</th></tr></thead>
                    <tbody id="log-body"></tbody>
                </table>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        let lastPrice = 0;
        let logs = JSON.parse(localStorage.getItem('edu_logs')) || [];

        // TradingView with S/R Lines (Visual Simulation)
        new TradingView.widget({
            "autosize": true, "symbol": "BINANCE:ETHUSDT", "interval": "15",
            "theme": "dark", "container_id": "tv_chart",
            "overrides": {
                "mainSeriesProperties.candleStyle.upColor": "#02c076",
                "mainSeriesProperties.candleStyle.downColor": "#cf304a"
            }
        });

        async function updateMarket() {
            try {
                const res = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=ETHUSDT');
                const data = await res.json();
                const price = parseFloat(data.price);
                
                document.getElementById('price-live').innerText = '$' + price.toFixed(2);
                
                // Alert Trigger Logic
                if (price <= 1965 && price >= 1955) {
                    triggerAlert();
                }

                // AI Prediction Logic
                const moveEl = document.getElementById('move-ai');
                if (price < 1970) {
                    moveEl.innerText = "BUY ZONE"; moveEl.style.color = "var(--green)";
                } else {
                    moveEl.innerText = "NEUTRAL"; moveEl.style.color = "var(--gold)";
                }

                if (Math.abs(price - lastPrice) > 2) {
                    saveLog("Price Update", price);
                    lastPrice = price;
                }
            } catch(e) {}
        }

        function triggerAlert() {
            const alertBox = document.getElementById('alert-overlay');
            alertBox.style.display = 'block';
            setTimeout(() => { alertBox.style.display = 'none'; }, 5000);
            saveLog("âš ï¸ ENTRY ALERT", 1960);
        }

        function saveLog(event, price) {
            const log = { time: new Date().toLocaleTimeString(), event, price: '$' + price };
            logs.unshift(log);
            if(logs.length > 30) logs.pop();
            localStorage.setItem('edu_logs', JSON.stringify(logs));
            renderLogs();
        }

        function renderLogs() {
            document.getElementById('log-body').innerHTML = logs.map(l => `
                <tr><td>${l.time}</td><td>${l.event}</td><td>${l.price}</td></tr>
            `).join('');
        }

        setInterval(updateMarket, 10000);
        updateMarket();
        renderLogs();
    </script>
</body>
</html>